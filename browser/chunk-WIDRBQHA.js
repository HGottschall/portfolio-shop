import{W as a,k as o}from"./chunk-KOVEMDHD.js";var c=class r{itemSubject=new o([]);items$=this.itemSubject.asObservable();constructor(){let e=localStorage.getItem("cart");e&&this.itemSubject.next(JSON.parse(e))}updateStorage(e){localStorage.setItem("cart",JSON.stringify(e))}add(e){let t=[...this.itemSubject.value],i=t.findIndex(m=>m.product.id===e.id);i>-1?t[i].quantity++:t.push({product:e,quantity:1}),this.itemSubject.next(t),this.updateStorage(t)}remove(e){let t=this.itemSubject.value.filter(i=>i.product.id!==e);this.itemSubject.next(t),this.updateStorage(t)}clear(){this.itemSubject.next([]),localStorage.removeItem("cart")}getTotal(){return this.itemSubject.value.reduce((e,t)=>e+t.product.price*t.quantity,0)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{c as a};
